CREATE USER admin@localhost IDENTIFIED BY 'adminpsw';
 
CREATE DATABASE petpaltravel
    DEFAULT CHARACTER SET utf8
    DEFAULT COLLATE utf8_general_ci;
 
GRANT ALL PRIVILEGES ON petpaltravel.* TO admin@localhost;
 
USE petpaltravel;
 
CREATE TABLE users(
    id INT (10) NOT NULL AUTO_INCREMENT,
    name VARCHAR(80) NOT NULL,
    email VARCHAR(80) NOT NULL UNIQUE,
    password VARCHAR(15) NOT NULL,
    phone VARCHAR (15),
    isShelter BOOLEAN NOT NULL,
    ranking INT(9),
    PRIMARY KEY (id)
) ENGINE=InnoDB;

CREATE TABLE location(
    id INT (10) NOT NULL AUTO_INCREMENT,
    cpnumber VARCHAR(5) UNIQUE NOT NULL,
    municipio VARCHAR(80) NOT NULL,
    provincia VARCHAR(40) NOT NULL,
    PRIMARY KEY (id)
) ENGINE=InnoDB;

CREATE TABLE companionofpet(
    id INT (10) NOT NULL AUTO_INCREMENT,
    idUserPersonOffering INT(10) NOT NULL,
    dateTravel DATE NOT NULL,
    originId INT(10) NOT NULL,
    destinyId INT(10) NOT NULL,
    trans_train BOOLEAN NOT NULL,
    trans_plane BOOLEAN NOT NULL,
    trans_car BOOLEAN NOT NULL,
    trans_ship BOOLEAN NOT NULL,
    typeCat BOOLEAN NOT NULL,
    typeDog BOOLEAN NOT NULL,
    typeOther BOOLEAN NOT NULL,
    comments VARCHAR(200),
    idUserShelterSelected INT (10),
    idUserShelterApplied1 INT (10),
    idUserShelterApplied2 INT (10),
    idUserShelterApplied3 INT (10),
    PRIMARY KEY (id),
    FOREIGN KEY (idUserPersonOffering) REFERENCES users(id) ON DELETE NO ACTION ON UPDATE CASCADE,
    FOREIGN KEY (originId) REFERENCES location(id) ON DELETE NO ACTION ON UPDATE CASCADE,
    FOREIGN KEY (destinyId) REFERENCES location(id) ON DELETE NO ACTION ON UPDATE CASCADE,
    FOREIGN KEY (idUserShelterSelected) REFERENCES users(id) ON DELETE NO ACTION ON UPDATE CASCADE,
    FOREIGN KEY (idUserPersonOffering) REFERENCES users(id) ON DELETE NO ACTION ON UPDATE CASCADE,
    FOREIGN KEY (idUserPersonOffering) REFERENCES users(id) ON DELETE NO ACTION ON UPDATE CASCADE,
    FOREIGN KEY (idUserPersonOffering) REFERENCES users(id) ON DELETE NO ACTION ON UPDATE CASCADE
) ENGINE=InnoDB;

CREATE TABLE companionforpet(
    id INT (10) NOT NULL AUTO_INCREMENT,
    idUserShelterDemanding INT(10) NOT NULL,
    namePet VARCHAR (40) NOT NULL,
    avaliableFrom DATE NOT NULL,
    deadline DATE,
    originId INT(10) NOT NULL,
    destinyId INT(10) NOT NULL,
    typePet VARCHAR (15) NOT NULL,   
    comments VARCHAR(200),
    idUserPersonSelected INT (10),
    idUserPersonApplied1 INT (10),
    idUserPersonApplied2 INT (10),
    idUserPersonApplied3 INT (10),
    PRIMARY KEY (id),
    FOREIGN KEY (idUserShelterDemanding) REFERENCES users(id) ON DELETE NO ACTION ON UPDATE CASCADE,
    FOREIGN KEY (originId) REFERENCES location(id) ON DELETE NO ACTION ON UPDATE CASCADE,
    FOREIGN KEY (destinyId) REFERENCES location(id) ON DELETE NO ACTION ON UPDATE CASCADE,
    FOREIGN KEY (idUserPersonSelected) REFERENCES users(id) ON DELETE NO ACTION ON UPDATE CASCADE,
    FOREIGN KEY (idUserPersonApplied1) REFERENCES users(id) ON DELETE NO ACTION ON UPDATE CASCADE,
    FOREIGN KEY (idUserPersonApplied2) REFERENCES users(id) ON DELETE NO ACTION ON UPDATE CASCADE,
    FOREIGN KEY (idUserPersonApplied3) REFERENCES users(id) ON DELETE NO ACTION ON UPDATE CASCADE
) ENGINE=InnoDB;

 

 
INSERT INTO users (id, name, email, password, phone, isShelter, ranking) VALUES
	(1, 'Protectora Can', 'can@gmail.com', 'passcan', '645859626', true, null),
	(2, 'Protectora Kitty', 'gatos@gmail.com', 'passckitty', '655963626', true, null),
	(3, 'Marta', 'marta@gmail.com', 'passmarta', '636261646', false, null),
	(4, 'Roser', 'roser@gmail.com', 'passroser', '625451245', false, null),
	(5, 'Anna', 'anna@gmail.com', 'passanna', null, false, null);
 
INSERT INTO location (id, cpnumber, municipio, provincia) VALUES 
(1, '08907', 'Hospitalet de Llobregat', 'Barcelona'),
(2, '28001', 'Madrid', 'Madrid'), (3, '07800', 'Ibiza', 'Illes Balears'),
(4, '38001', 'Sta. Cruz de Tenerife', 'Sta. Cruz de Tenerife');


INSERT INTO companionofpet(id, idUserPersonOffering, dateTravel, originId,  destinyId, trans_train, 
trans_plane, trans_car, trans_ship , typeCat, typeDog, typeOther, comments, idUserShelterSelected, 
idUserShelterApplied1, idUserShelterApplied2, idUserShelterApplied3) VALUES 
    (1,3, 2020-07-14, 1, 3, false, true, false, false, false, true, false, 
'Soy adiestradora canina, así que tengo mucha experiencia con perros', null, 1, null, null),
    (2,4, 2020-06-20, 2, 4, false, true, false, false, true, true, true, null, null, 2, null, null),
    (3,3, 2020-07-26, 3, 1, false, true, false, false, false, true, false, 
'Soy adiestradora canina, así que tengo mucha experiencia con perros', null, null, null, null);


INSERT INTO companionforpet(id, idUserShelterDemanding, namePet, avaliableFrom, deadline, originId, destinyId, 
typePet, comments, idUserPersonSelected, idUserPersonApplied1, idUserPersonApplied2, idUserPersonApplied3) VALUES 
    (1, 1, 'Drako', 2020-05-27, null, 3, 4, 'Perro/a', 'FoxTerrier pequeño (se puede llevar en cabina)', 
null, 3, null, null),
    (2, 2, 'Sibil', 2020-06-10, 2020-08-31, 4, 1, 'Gato/a', 'Gatita pequeña muy buena', null, null, null, null),
    (3, 2, 'Dina', 2020-06-28, 2020-08-31, 4, 2, 'Gato/a', 'Gato mayor, pesa bastante', null, 4, null, null);